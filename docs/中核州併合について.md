# 概要
``
希拉 — 昨日 22:43
@実装班
イベントを起こしてください
Kaiserreichの「〜の保有していた領土は既に我が国の中核州である」をモロパクればいいです
``
とのことなのでそれっぽい資料を集めてきました

## (おそらく)迎合度の判定
```
compliance_integration_50 = {
	type = core_compliance_modifier
	icon = "GFX_occupation_compliance_modifier_strip:5"
	small_icon = "GFX_occupation_compliance_modifier_small_strip:5"
	threshold = 50
	margin = 2

	visible = {
		check_variable = { can_integrate_@FROM = 50 }
	}

	on_enable = {
		if = {
			limit = { FROM = { original_tag = XXA } }
			effect_tooltip = {
				every_controlled_state = {
					limit = {
						check_variable = { can_integrate_@ROOT = 50 }
						NOT = { is_core_of = ROOT }
					}
					add_state_core_upon_reaching_compliance_threshold = yes
				}
			}
		}
		else = {
			add_country_cores_upon_reaching_compliance_threshold = yes
		}
	}
}
```

## ↑が呼び出した先のメソッド
```
add_state_core_upon_reaching_compliance_threshold = {
	add_core_of = FROM
	hidden_effect = {
		remove_claim_by = FROM

		#disable resistance if set
		force_enable_resistance = { occupied = XXA clear = yes }
		if = {
			limit = { has_resistance = yes }
			cancel_resistance = yes
		}

		#check all cores in state, remove cores of dead tags if set
		for_each_scope_loop = {
			array = core_countries
			if = {
				limit = {
					exists = no
					remove_cores_of_tag_if_non_existent = yes
				}
				add_to_temp_array = { cores_to_remove = THIS }
			}
		}
		for_each_loop = {
			array = cores_to_remove
			remove_core_of = var:v
		}

		#fire notification if player
		if = {
			limit = {
				FROM = { is_ai = no }
				NOT = { is_in_array = { FROM.state_integration_alerts = THIS } }
			}
			add_to_array = { FROM.state_integration_alerts = THIS }
			FROM = { scoped_sound_effect = coring_sfx }
			set_variable_to_random = global.kaiserreich_alerts_dirty
		}
	}
}
```

